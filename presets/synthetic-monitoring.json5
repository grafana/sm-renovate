{
  // This file contains common settings for SM repositories.
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:best-practices",
    ":semanticCommitsDisabled"
  ],
  "commitMessagePrefix": "chore: ",
  "labels": [
    "dependencies"
  ],
  "dependencyDashboard": false,
  "prHourlyLimit": 0,
  "prConcurrentLimit": 10,
  "branchConcurrentLimit": 10,
  "packageRules": [
    {
      // Disable minimumReleaseAge. As this setting is inherited from the default config in
      // https://github.com/grafana/deployment_tools/blob/16231ba00eac9310d2360a2075a96b1106a02c34/ksonnet/lib/renovate-self-hosted/renovate.jsonnet#L33
      // we cannot override it as a root-level setting on a preset (this file). To work around this, we create a
      // packageRule that matches everything and disables this.
      "matchDatasources": [
        "docker",
      ],
      "minimumReleaseAge": "",
    },
    {
      // go.mod digest updates are very frequent, so we allow them only on monday mornings.
      "matchManagers": [
        "gomod"
      ],
      "matchUpdateTypes": [
        "digest"
      ],
      "schedule": "* 0-8 * * 1"
    },
    {
      // We typically want to upgrade all prometheus-go packages at once.
      "matchManagers": [
        "gomod"
      ],
      "matchPackageNames": "github.com/prometheus/**",
      "groupName": "prometheus-go"
    },
    {
      // We typically want to upgrade all otel-go packages at once.
      "matchManagers": [
        "gomod"
      ],
      "matchPackageNames": "go.opentelemetry.io/**",
      "groupName": "otel-go"
    },
    {
      // shared-workflows digests get updates really often. Throttle them a bit.
      "matchManagers": "github-actions",
      "matchPackageNames": "grafana/shared-workflows",
      "matchUpdateTypes": ["digest"],
      "schedule": "* 0-8 * * 1",
    },
    {
      // Disable updates to indirect go dependencies.
      "matchManagers": ["gomod"],
      "matchDepTypes": ["indirect"],
      "enabled": false,
    },
  ]
}
